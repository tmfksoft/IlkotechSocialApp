<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>
        </title>
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <link rel="stylesheet" href="css/main.css" />
        <style>
			#result { display:none !important; }
        </style>
		<!--<script src="https://raw.github.com/carlo/jquery-base64/master/jquery.base64.min.js">
		</script>-->
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        </script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.js">
        </script>
        <script src="js/main.js">
        </script>
    </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
                <h3>
                    Ilkotech Social
                </h3>
            </div>
            <div data-role="content">
                <h2>
                    Login
                </h2>
                <h5 id="result">
                    Logging in...
                </h5>
                <form action="">
                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup">
                            <label for="username">
                                Username:
                            </label>
                            <input name="" id="username" placeholder="" value="" type="text" />
                        </fieldset>
                    </div>
                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup">
                            <label for="password">
                                Password:
                            </label>
                            <input name="" id="password" placeholder="" value="" type="password" />
                        </fieldset>
                    </div>
                    <a data-role="button" data-theme="a" href="javascript:checkdetails();" onclick="checkdetails();">
                        Login
                    </a>
                </form>
            </div>
        </div>
        <script>
            function checkdetails() {
				$('#result').show();
				//encoded = $.base64.encode($('#username').attr('value')+"|"+$('#password').attr('value')); Blame JQuery
				$.getJSON('http://social.ilkotech.co.uk/api/login.php?username='+$('#username').attr('value')+"&password="+$('#password').attr('value')+"", function(data){
					// JScript hates everything living :P
					if (data.status == 'BAD') {
						$('#result').text(data.message);
					}
					else {
						$('#result').text(data.message);
						// Add SQL Data!
						// Redirect to main page.
						$.mobile.changePage('home.html');
					}
				},"json");
			}
        </script>
    </body>
</html>